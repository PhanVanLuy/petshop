<div class="m-5" *ngIf="user">
  <div class="container">
    <div class="row my-1">
      <div class="col-12">
        <div class="row d-flex flex-md-row flex-sm-column-reverse">
          <div class="col-md-8 col-sm-12">
            <div class="alternative-payment-separator">
                      <span class="alternative-payment-separator__content">
                        Information
                      </span>
            </div>
            <div class="row justify-content-between">
              <div class="col-auto align-items-center">
                <h6>Contact Information</h6>
              </div>
            </div>
            <form [formGroup]="informationForm" (ngSubmit)="onSubmitFormInformation()">
              <div class="row m-1">
                <div class="col-12">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Email</mat-label>
                    <input matInput disabled [value]="user?.email">
                  </mat-form-field>
                </div>
              </div>
              <div class="row mt-3 justify-content-between">
                <div class="col-auto align-items-center">
                  <h6>Shipping Address</h6>
                </div>
              </div>
              <div class="row m-1">
                <div class="col-6">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>First name</mat-label>
                    <input matInput placeholder="Enter first name"
                           formControlName="firstName" maxlength="100">
                    <mat-error
                      *ngIf="informationForm.controls.firstName.invalid && (informationSubmitted || informationForm.controls.firstName.touched)">
                      <ng-container
                        *ngIf="informationForm.controls.firstName.errors?.required">
                        First name is required
                      </ng-container>
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-6">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Last name</mat-label>
                    <input matInput placeholder="Enter last name"
                           formControlName="lastName" maxlength="100">
                    <mat-error
                      *ngIf="informationForm.controls.lastName.invalid && (informationSubmitted || informationForm.controls.lastName.touched)">
                      <ng-container
                        *ngIf="informationForm.controls.lastName.errors?.required">
                        Last name is required
                      </ng-container>
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="row m-1">
                <div class="col-12">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Company</mat-label>
                    <input matInput placeholder="Enter company"
                           formControlName="company" maxlength="100">
                  </mat-form-field>
                </div>
              </div>
              <div class="row m-1">
                <div class="col-12">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Address</mat-label>
                    <input matInput placeholder="Enter address"
                           formControlName="address" maxlength="100">
                    <mat-error
                      *ngIf="informationForm.controls.address.invalid && (informationSubmitted || informationForm.controls.address.touched)">
                      <ng-container
                        *ngIf="informationForm.controls.address.errors?.required">
                        Address is required
                      </ng-container>
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="row m-1">
                <div class="col-12">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Apartment, suite, etc.</mat-label>
                    <input matInput placeholder="Enter Apartment, suite, etc"
                           formControlName="apartment" maxlength="100">
                  </mat-form-field>
                </div>
              </div>
              <div class="row m-1">
                <div class="col-12">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>City</mat-label>
                    <input matInput placeholder="Enter city"
                           formControlName="city" maxlength="100">
                    <mat-error
                      *ngIf="informationForm.controls.city.invalid && (informationSubmitted || informationForm.controls.city.touched)">
                      <ng-container
                        *ngIf="informationForm.controls.city.errors?.required">
                        City is required
                      </ng-container>
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="row m-1">
<!--                <div class="col-6">-->
<!--                  <mat-form-field appearance="outline" class="w-100">-->
<!--                    <mat-label>Country/Region</mat-label>-->
<!--                    <mat-select formControlName="country"-->
<!--                                (selectionChange)="changeCountry()">-->
<!--                      <ng-container *ngFor="let country of COUNTRY_CODES">-->
<!--                        <mat-option [value]="country.code">-->
<!--                          {{country.value}}-->
<!--                        </mat-option>-->
<!--                      </ng-container>-->
<!--                    </mat-select>-->
<!--                  </mat-form-field>-->
<!--                </div>-->
                <div class="col-6">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Postal code</mat-label>
                    <input matInput placeholder="Enter postal code"
                           formControlName="postalCode" maxlength="50">
                    <mat-error
                      *ngIf="informationForm.controls.postalCode.invalid && (informationSubmitted || informationForm.controls.postalCode.touched)">
                      <ng-container
                        *ngIf="informationForm.controls.postalCode.errors?.required">
                        Postal code is required
                      </ng-container>
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="row m-1">
                <div class="col-12">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Phone</mat-label>
                    <input matInput placeholder="Enter phone"
                           formControlName="phone" maxlength="100">
                  </mat-form-field>
                </div>
              </div>
              <div class="row m-1 my-2 justify-content-end" *ngIf="!isChanging">
                <div class="col-6 p-0 d-flex justify-content-end">
                  <button class="btn btn-dark" (click)="changeInformationClick()">
                    Change
                  </button>
                </div>
              </div>
              <div class="row m-1 my-2 justify-content-around" *ngIf="isChanging">
                <div class="col-6 p-0 d-flex align-items-center">
                  <button class="btn btn-primary-outline" (click)="changeInformationClick()"
                          [disabled]="loading">
                    <mat-icon>keyboard_arrow_left</mat-icon>
                    Back
                  </button>
                </div>
                <div class="col-6 p-0 d-flex justify-content-end">
                  <button class="btn btn-dark" type="submit">
                    <ng-container *ngIf="loading">
                                            <span class="spinner-border spinner-border-sm" role="status"
                                                  aria-hidden="true"></span>
                      Loading...
                    </ng-container>
                    <ng-container *ngIf="!loading">
                      Update
                    </ng-container>
                  </button>
                  <mat-error *ngIf="errorMessage">
                    {{errorMessage}}
                  </mat-error>
                </div>
              </div>
              <div class="row">
                <div class="col-12 d-flex justify-content-end">
                  <p *ngIf="successMessage">
                    Updated profile successfully.
                  </p>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
